import{_ as a,c as n,o as e,a as s}from"./app.60263e9e.js";const h='{"title":"GitLab \u90E8\u7F72","description":"","frontmatter":{"sidebarDepth":2},"headers":[{"level":2,"title":"deploy \u9636\u6BB5\u603B\u662F\u4F7F\u7528\u7684\u65E7\u955C\u50CF","slug":"deploy-\u9636\u6BB5\u603B\u662F\u4F7F\u7528\u7684\u65E7\u955C\u50CF"},{"level":2,"title":"values.container.command \u672A\u6267\u884C","slug":"values-container-command-\u672A\u6267\u884C"},{"level":2,"title":"\u62A5\u9519\uFF1AYAML parse error","slug":"\u62A5\u9519\uFF1Ayaml-parse-error"}],"relativePath":"ci_cd/gitlab.md"}',t={},o=s(`<h1 id="gitlab-\u90E8\u7F72" tabindex="-1">GitLab \u90E8\u7F72 <a class="header-anchor" href="#gitlab-\u90E8\u7F72" aria-hidden="true">#</a></h1><h2 id="deploy-\u9636\u6BB5\u603B\u662F\u4F7F\u7528\u7684\u65E7\u955C\u50CF" tabindex="-1">deploy \u9636\u6BB5\u603B\u662F\u4F7F\u7528\u7684\u65E7\u955C\u50CF <a class="header-anchor" href="#deploy-\u9636\u6BB5\u603B\u662F\u4F7F\u7528\u7684\u65E7\u955C\u50CF" aria-hidden="true">#</a></h2><p>\u68C0\u67E5<code>/helm/\${project_name}/values-*.yaml</code>\u6587\u4EF6\uFF0C<code>nodeSelector.appenv</code>\u4E3A<code>test</code>\u65F6\uFF0C\u4E0D\u8981\u914D\u7F6E<code>nodeSelector.nodetype</code>\u3002</p><div class="language-yaml"><pre><code><span class="token key atrule">nodeSelector</span><span class="token punctuation">:</span>
  <span class="token key atrule">appenv</span><span class="token punctuation">:</span> test

<span class="token comment"># or</span>

<span class="token key atrule">nodeSelector</span><span class="token punctuation">:</span>
  <span class="token key atrule">appenv</span><span class="token punctuation">:</span> production
  <span class="token key atrule">nodetype</span><span class="token punctuation">:</span> front
</code></pre></div><h2 id="values-container-command-\u672A\u6267\u884C" tabindex="-1">values.container.command \u672A\u6267\u884C <a class="header-anchor" href="#values-container-command-\u672A\u6267\u884C" aria-hidden="true">#</a></h2><p>\u68C0\u67E5<code>/helm/\${project_name}/templates/deployment.yaml</code>\u6587\u4EF6\uFF1A</p><div class="language-yaml"><pre><code><span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> if .Values.container.command <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;bash&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-c&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> .Values.container.command <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> end <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="\u62A5\u9519\uFF1Ayaml-parse-error" tabindex="-1">\u62A5\u9519\uFF1AYAML parse error <a class="header-anchor" href="#\u62A5\u9519\uFF1Ayaml-parse-error" aria-hidden="true">#</a></h2><p>\u53EF\u80FD\u7531\u4E8E\u4E00\u4E9B\u683C\u5F0F\u5316\u63D2\u4EF6\u81EA\u52A8\u683C\u5F0F\u5316\u4E86<code>.yaml</code>\u6587\u4EF6\uFF0C\u6216\u6A21\u677F\u683C\u5F0F\u4E0D\u5BF9\uFF0C\u4ECE\u800C\u5BFC\u81F4\u89E3\u6790\u9519\u8BEF\u3002</p><p>\u4F8B\u5982<code>prettier</code>\u53EF\u4EE5\u914D\u7F6E\u5FFD\u7565\u6574\u4E2A<code>helm</code>\u76EE\u5F55\u3002</p><div class="language-"><pre><code>// .prettierignore

/helm
</code></pre></div>`,11),p=[o];function c(l,r,u,i,d,k){return e(),n("div",null,p)}var _=a(t,[["render",c]]);export{h as __pageData,_ as default};
